(function(){"use strict";const e=window.Vue;function l(){return window.panel}const p=()=>window.panel.plugins.viewButtons!==void 0;function f(){return p()?new Proxy({},{get(){throw new Error("Vuex store is not available. Are you using Kirby 5? Use the `useContent` composable instead.")}}):l().app.$store}function g(){const s=l(),n=f(),t=p(),o=u(t?()=>s.content.version("changes"):()=>n.getters["content/values"]()),a=u(t?()=>s.content.diff():()=>n.getters["content/changes"]()),i=u(t?()=>s.content.hasDiff():()=>n.getters["content/hasChanges"]()),c=t?s.content:new Proxy({},{get(){return()=>{}}});return{content:c,currentContent:o,contentChanges:a,hasChanges:i,update:async(r,k=!0)=>{if(!t&&r)for(const[R,D]of Object.entries(r))n.dispatch("content/update",[R,D]);const b=c.merge(r);k&&await c.save(b)}}}function v(){function s(t){let o=!1;return new Promise(a=>{const i=l();i.dialog.open({component:"k-text-dialog",props:{text:t},on:{close:()=>{setTimeout(()=>{a(o)},25)},submit:()=>{o=!0,i.dialog.close()}}})})}function n(t){let o;return new Promise(a=>{const i=l();i.dialog.open({component:"k-form-dialog",props:t,on:{close:()=>{setTimeout(()=>{a(o)},25)},submit:c=>{o=c,i.dialog.close()}}})})}return{openTextDialog:s,openFieldsDialog:n}}const u=e.computed;e.customRef,e.defineAsyncComponent,e.defineComponent,e.effectScope,e.getCurrentInstance,e.getCurrentScope,e.h,e.inject,e.isProxy,e.isReactive,e.isReadonly,e.isRef,e.isShallow,e.markRaw,e.nextTick,e.onActivated,e.onBeforeMount,e.onBeforeUnmount,e.onBeforeUpdate,e.onDeactivated,e.onErrorCaptured,e.onMounted,e.onRenderTracked,e.onRenderTriggered,e.onScopeDispose,e.onServerPrefetch,e.onUnmounted,e.onUpdated,e.provide,e.proxyRefs,e.reactive,e.readonly,e.ref,e.shallowReactive,e.shallowReadonly,e.shallowRef,e.toRaw,e.toRef,e.toRefs,e.triggerRef,e.unref,e.useAttrs,e.useCssModule,e.useCssVars,e.useListeners,e.useSlots,e.watch,e.watchEffect,e.watchPostEffect,e.watchSyncEffect;function _(s,n,t,o,a,i,c,d){var r=typeof s=="function"?s.options:s;return n&&(r.render=n,r.staticRenderFns=t,r._compiled=!0),{exports:s,options:r}}const h={__name:"Playground",setup(s){const{currentContent:n,contentChanges:t,hasChanges:o,update:a}=g(),{openTextDialog:i,openFieldsDialog:c}=v(),d=l();return{__sfc:!0,currentContent:n,contentChanges:t,hasChanges:o,update:a,openTextDialog:i,openFieldsDialog:c,panel:d,updateContent:()=>{a({text:"Updated text"})}}}};var m=function(){var n=this,t=n._self._c,o=n._self._setupProxy;return t("k-section",{staticClass:"k-kirbyuse-playground",attrs:{label:"Kirbyuse Playground"}},[t("section",[t("h3",[n._v("useContent")]),t("div",[t("h4",[n._v("currentContent")]),t("k-code",{attrs:{language:"js"}},[n._v(n._s(o.currentContent))])],1),t("div",[t("h4",[n._v("contentChanges")]),t("k-code",{attrs:{language:"js"}},[n._v(n._s(o.contentChanges))])],1),t("div",[t("h4",[n._v("hasChanges")]),t("k-code",{attrs:{language:"js"}},[n._v(n._s(o.hasChanges))])],1),t("div",[t("h4",[n._v("update()")]),t("k-button",{attrs:{variant:"filled"},on:{click:o.updateContent}},[n._v("Apply Update")])],1)]),t("section",[t("h3",[n._v("useDialog")]),t("div",[t("h4",[n._v("openTextDialog()")]),t("k-button",{attrs:{variant:"filled"},on:{click:function(a){return o.openTextDialog("Are you sure?")}}},[n._v("Open Dialog")])],1),t("div",[t("h4",[n._v("openFieldsDialog()")]),t("k-button",{attrs:{variant:"filled"},on:{click:function(a){return o.openFieldsDialog({fields:{email:{type:"email",label:"Email"}}})}}},[n._v(" Open Dialog ")])],1)]),t("section",[t("h3",[n._v("usePanel")]),t("div",[t("h4",[n._v("panel.notification.success()")]),t("k-button",{attrs:{variant:"filled"},on:{click:function(a){return o.panel.notification.success("Success!")}}},[n._v("Success")])],1)])])},y=[],C=_(h,m,y);const w=C.exports;panel.plugin("kirbyuse/playground",{sections:{playground:w}})})();
